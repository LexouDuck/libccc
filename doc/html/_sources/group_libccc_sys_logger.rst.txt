.. index:: pair: group; 14) libccc/sys/logger
.. _doxid-group__libccc__sys__logger:

14) libccc/sys/logger
=====================

.. toctree::
	:hidden:

	struct_s_logfile_.rst
	struct_s_logger_.rst

Overview
~~~~~~~~

This header defines a simple yet useful set of functions to do program logging :ref:`More...<details-group__libccc__sys__logger>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	
	// typedefs

	typedef struct :ref:`s_logfile_<doxid-structs__logfile__>` :target:`s_logfile<doxid-group__libccc__sys__logger_1gaa7b76789afd5da81a576e8fe361161c1>`;
	typedef struct :ref:`s_logger_<doxid-structs__logger__>` :ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>`;

	// structs

	struct :ref:`s_logfile_<doxid-structs__logfile__>`;
	struct :ref:`s_logger_<doxid-structs__logger__>`;

	// global functions

	void :ref:`Logger_Init<doxid-group__libccc__sys__logger_1ga47c4a4313e7a399114c24171076f8785>`(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>`* a_logger);
	void :ref:`Logger_Exit<doxid-group__libccc__sys__logger_1ga10e1fbdd193b1d2754a5f930c7d6f176>`(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>`* a_logger);
	void :ref:`Logger_DeleteMemory<doxid-group__libccc__sys__logger_1gaf23b81013bb9a26e5d741032d99b65c5>`(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>`* a_logger);
	char* :ref:`Logger_GetSettings<doxid-group__libccc__sys__logger_1gabd8bc35c3ab587ba3f835b6ece680169>`(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger);
	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` :ref:`Logger_LogSettings<doxid-group__libccc__sys__logger_1ga21f6bdc9b5df52ae213ad7e85f0a056a>`(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger);
	char* :ref:`Logger_GetTimestamp<doxid-group__libccc__sys__logger_1gab2442acaacf840c543dceab176ced215>`(:ref:`t_time<doxid-group__libccc__sys__time_1gac18942bf2f3dc9acba993dd65cca3aca>` utc);

	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` :ref:`Log<doxid-group__libccc__sys__logger_1ga79a2718bb19798fe39dcc42e57fb97e3>`(
		:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger,
		:ref:`t_bool<doxid-group__libccc__bool_1gaf15d2c7169c336f97175a2e218d22e73>` is_verbose_only,
		:ref:`t_bool<doxid-group__libccc__bool_1gaf15d2c7169c336f97175a2e218d22e73>` is_error,
		:ref:`t_bool<doxid-group__libccc__bool_1gaf15d2c7169c336f97175a2e218d22e73>` use_errno_perror,
		char const* format_str,
		...
		);

	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` :target:`Log_VA<doxid-group__libccc__sys__logger_1ga80b732b1b66f6b1704de0bf401796b44>`(
		:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger,
		:ref:`t_bool<doxid-group__libccc__bool_1gaf15d2c7169c336f97175a2e218d22e73>` verbose_only,
		:ref:`t_bool<doxid-group__libccc__bool_1gaf15d2c7169c336f97175a2e218d22e73>` is_error,
		:ref:`t_bool<doxid-group__libccc__bool_1gaf15d2c7169c336f97175a2e218d22e73>` use_errno,
		char const* prefix,
		char const* prefix_color,
		char const* format_str,
		va_list args
		);

	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` :ref:`Log_Fatal<doxid-group__libccc__sys__logger_1ga75c08f07fd62d7126edea4a389c19d5c>`(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* str);
	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` :ref:`Log_Error_IO<doxid-group__libccc__sys__logger_1ga867f56bbfc2c1fa9f1e3dbc92c357113>`(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* format_str, ...);
	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` :ref:`Log_Error<doxid-group__libccc__sys__logger_1ga1c71ae136155353bb25126e36a83745e>`(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* format_str, ...);
	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` :ref:`Log_Warning<doxid-group__libccc__sys__logger_1gaf15ebe7290c80f641ed438cbc76ad053>`(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* format_str, ...);
	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` :ref:`Log_Success<doxid-group__libccc__sys__logger_1ga952ec8d8a5421a297b869fdfca5ad106>`(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* format_str, ...);
	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` :ref:`Log_Message<doxid-group__libccc__sys__logger_1gaeed77752fa7934877c5458c29327edcf>`(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* format_str, ...);
	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` :ref:`Log_Message_Verbose<doxid-group__libccc__sys__logger_1ga448d3ef62c0b0e77897c525c84e4fd84>`(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* format_str, ...);

	// macros

	#define :target:`DeleteMemory_Logger<doxid-group__libccc__sys__logger_1ga63fcdd8a8b026daa74c484a7ebe70226>`
	#define :target:`FinalizeLogger<doxid-group__libccc__sys__logger_1ga976c2b8d097d7fcfe9e3d84559d41ec5>`
	#define :target:`InitializeLogger<doxid-group__libccc__sys__logger_1ga3dbb03135c17628f6c77d5f51e9a9895>`
	#define :ref:`LOGFILES_MAX<doxid-group__libccc__sys__logger_1ga7578b7b1beddac3036f88cff0eecd3a2>`
	#define :ref:`LOG_TIMESTAMP_FORMAT<doxid-group__libccc__sys__logger_1gaf8a4b7b69c077ba6862ef81badcbaacc>`
	#define :ref:`LOG_TIMESTAMP_INDENT<doxid-group__libccc__sys__logger_1ga016fd9fef8c6d3b4c7f085ca63dfa402>`
	#define :target:`Log_FatalError<doxid-group__libccc__sys__logger_1ga8af63972719d757fd37d0253ef7d5c0c>`
	#define :target:`Log_SystemError<doxid-group__libccc__sys__logger_1ga09b65d258775cbbd577d3457d1b7bb8c>`
	#define :target:`Log_Verbose<doxid-group__libccc__sys__logger_1gac4598727ed57c656e288f113ed345712>`
	#define :target:`NULL_LOGFILE<doxid-group__libccc__sys__logger_1gab3f1a96b0b7d7561644ba6994a1c0744>`
	#define :target:`NULL_LOGGER<doxid-group__libccc__sys__logger_1gada3edae0070ddc1c761ab45e69e79168>`
	#define :target:`c_log_<doxid-group__libccc__sys__logger_1ga9da6d45997feaa13958f4ac48856502f>`
	#define :target:`c_log_delmemory<doxid-group__libccc__sys__logger_1ga6fdc75cfd4ff25de303c6a42556afcbe>`
	#define :target:`c_log_error<doxid-group__libccc__sys__logger_1gae4ea9c37d07a15715d6428807b5c09fd>`
	#define :target:`c_log_error_io<doxid-group__libccc__sys__logger_1ga9e02f02c8e50d7a87d17d8719c407ad6>`
	#define :target:`c_log_exit<doxid-group__libccc__sys__logger_1ga5c52e007d79653c5dc4295d32df7526d>`
	#define :target:`c_log_fatal<doxid-group__libccc__sys__logger_1ga25f4b487319631d9e19e276e07b55de1>`
	#define :target:`c_log_getsettings<doxid-group__libccc__sys__logger_1ga560be122806a511d8ab0f6c8d7dd9555>`
	#define :target:`c_log_init<doxid-group__libccc__sys__logger_1gafa309f127526016dbb4acf72c944f81d>`
	#define :target:`c_log_logsettings<doxid-group__libccc__sys__logger_1ga29a1a01457e6797b622445395ee2d9b7>`
	#define :target:`c_log_message<doxid-group__libccc__sys__logger_1gad7cdf766667ab7619ebf390f36472320>`
	#define :target:`c_log_success<doxid-group__libccc__sys__logger_1ga0c5b66bf8be55a16e706548dc758e98d>`
	#define :target:`c_log_va<doxid-group__libccc__sys__logger_1gac5359363d79c3a6740a8781f00f4ba8d>`
	#define :target:`c_log_verbose<doxid-group__libccc__sys__logger_1ga83969c4a157f63fd0281544eeb552ec4>`
	#define :target:`c_log_warning<doxid-group__libccc__sys__logger_1gac5c57cabb50396f7628cc0955124df49>`

.. _details-group__libccc__sys__logger:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

This header defines a simple yet useful set of functions to do program logging

Typedefs
--------

.. index:: pair: typedef; s_logger
.. _doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	typedef struct :ref:`s_logger_<doxid-structs__logger__>` s_logger

This struct stores all the settings and internal state needed for a basic logging system.

Global Functions
----------------

.. index:: pair: function; Logger_Init
.. _doxid-group__libccc__sys__logger_1ga47c4a4313e7a399114c24171076f8785:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void Logger_Init(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>`* a_logger)

Create a new logger. If logfile_path is required, but NULL, a default macro is used.

.. index:: pair: function; Logger_Exit
.. _doxid-group__libccc__sys__logger_1ga10e1fbdd193b1d2754a5f930c7d6f176:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void Logger_Exit(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>`* a_logger)

Cleanly release logger (close file descriptors, etc)

.. index:: pair: function; Logger_DeleteMemory
.. _doxid-group__libccc__sys__logger_1gaf23b81013bb9a26e5d741032d99b65c5:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void Logger_DeleteMemory(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>`* a_logger)

Free all memory in logger, but do not release sockets; useful when a duplicated memory instance exists.

.. index:: pair: function; Logger_GetSettings
.. _doxid-group__libccc__sys__logger_1gabd8bc35c3ab587ba3f835b6ece680169:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	char* Logger_GetSettings(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger)

Util function to help debug the logger.

.. index:: pair: function; Logger_LogSettings
.. _doxid-group__libccc__sys__logger_1ga21f6bdc9b5df52ae213ad7e85f0a056a:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` Logger_LogSettings(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger)

Util function to help debug the logger.

.. index:: pair: function; Logger_GetTimestamp
.. _doxid-group__libccc__sys__logger_1gab2442acaacf840c543dceab176ced215:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	char* Logger_GetTimestamp(:ref:`t_time<doxid-group__libccc__sys__time_1gac18942bf2f3dc9acba993dd65cca3aca>` utc)

Returns a UNIX-format string representation of the given 'utc' date/time number.

.. index:: pair: function; Log
.. _doxid-group__libccc__sys__logger_1ga79a2718bb19798fe39dcc42e57fb97e3:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` Log(
		:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger,
		:ref:`t_bool<doxid-group__libccc__bool_1gaf15d2c7169c336f97175a2e218d22e73>` is_verbose_only,
		:ref:`t_bool<doxid-group__libccc__bool_1gaf15d2c7169c336f97175a2e218d22e73>` is_error,
		:ref:`t_bool<doxid-group__libccc__bool_1gaf15d2c7169c336f97175a2e218d22e73>` use_errno_perror,
		char const* format_str,
		...
		)

Send a printf-like string to logfile.

.. index:: pair: function; Log_Fatal
.. _doxid-group__libccc__sys__logger_1ga75c08f07fd62d7126edea4a389c19d5c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` Log_Fatal(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* str)

Used to log a fundamental error where even the logger itself doesn't work: calls the STD C perror() function.

.. index:: pair: function; Log_Error_IO
.. _doxid-group__libccc__sys__logger_1ga867f56bbfc2c1fa9f1e3dbc92c357113:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` Log_Error_IO(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* format_str, ...)

Logging (perror-style) to both stderr and logfile (if applicable)

.. index:: pair: function; Log_Error
.. _doxid-group__libccc__sys__logger_1ga1c71ae136155353bb25126e36a83745e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` Log_Error(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* format_str, ...)

Logging perror-style to both stderr and logfile (if applicable)

.. index:: pair: function; Log_Warning
.. _doxid-group__libccc__sys__logger_1gaf15ebe7290c80f641ed438cbc76ad053:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` Log_Warning(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* format_str, ...)

To be called when there is an important warning to show to the user.

.. index:: pair: function; Log_Success
.. _doxid-group__libccc__sys__logger_1ga952ec8d8a5421a297b869fdfca5ad106:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` Log_Success(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* format_str, ...)

To be called when there is an successful operation (or result) to notify the user of.

.. index:: pair: function; Log_Message
.. _doxid-group__libccc__sys__logger_1gaeed77752fa7934877c5458c29327edcf:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` Log_Message(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* format_str, ...)

Logging printf-style of message to both stdout and logfile (if applicable)

.. index:: pair: function; Log_Message_Verbose
.. _doxid-group__libccc__sys__logger_1ga448d3ef62c0b0e77897c525c84e4fd84:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`t_io_error<doxid-group__libccc__sys__io_1ga2468f6097a96e11ea9356256dd5a9cbb>` Log_Message_Verbose(:ref:`s_logger<doxid-group__libccc__sys__logger_1ga155f4d407bb902c8b08e8ae6ec49aece>` const* logger, char const* format_str, ...)

Logging printf-style of verbose message to both stdout and logfile (if applicable)

Macros
------

.. index:: pair: define; LOGFILES_MAX
.. _doxid-group__libccc__sys__logger_1ga7578b7b1beddac3036f88cff0eecd3a2:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	#define LOGFILES_MAX

The maximum amount of files a logger can log to simultaneously.

.. index:: pair: define; LOG_TIMESTAMP_FORMAT
.. _doxid-group__libccc__sys__logger_1gaf8a4b7b69c077ba6862ef81badcbaacc:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	#define LOG_TIMESTAMP_FORMAT

The format with which to display timestamps at the beginning of log lines.

.. index:: pair: define; LOG_TIMESTAMP_INDENT
.. _doxid-group__libccc__sys__logger_1ga016fd9fef8c6d3b4c7f085ca63dfa402:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	#define LOG_TIMESTAMP_INDENT

The string to display at the beginning of each new line when outputting text that is multiline As such, the amount of spaces here is equivalent to the size of a console log timestamp

